<!DOCTYPE html>
#set(title="图片")
#set(bgImg="bgImage/bg1.jpg")
#@layout()

#define body()
<div id="pic-show-type0">
    #if(!picture_0)
    当前种类暂时没有图片
    #else
    #for(pic:picture_0.list)
    <div class="am-panel am-panel-default" style="width: 50%;float: left">
        <img class="am-img-responsive" src="/img?fileName=#(pic.path)"/>
        <hr data-am-widget="divider" style="" class="am-divider am-divider-default" />
        <div  style="text-align: center;padding-bottom: 20px">
            <a href="/picture/picInfo?id=#(pic.id)">#(pic.title)</a>
        </div>
    </div>
    #end
    <div style="clear: both">
        #set(pNum=picture_0.totalRow%picture_0.pageSize==0?picture_0.totalRow/picture_0.pageSize:picture_0.totalRow/picture_0.pageSize+1)
        #if(pNum==1)
        #elseif(pNum<=4)
        <ul class="am-pagination" style="text-align: center">
            #if(picture_0.pageNumber==1)
            <li class="am-disabled"><a href="#">&laquo;</a></li>
            #else
            <li><a href="/picture/#(picture_0.pageNumber-1)">&laquo;</a></li>
            #end
            #for(i=0;i<pNum;i++)
            #if(for.index+1==picture_0.pageNumber)
            <li class="am-active"><a href="">#(for.index+1)</a></li>
            #else
            <li><a href="/picture/#(for.index+1)">#(for.index+1)</a></li>
            #end
            #end
            #if(picture_0.pageNumber==pNum)
            <li class="am-disabled"><a href="#">&raquo;</a></li>
            #else
            <li><a href="/picture/#(picture_0.pageNumber+1)">&raquo;</a></li>
            #end
        </ul>
        #else
        <ul class="am-pagination" style="text-align: center">
            #if(picture_0.pageNumber==1)
            <li class="am-disabled"><a href="#">&laquo;</a></li>
            #else
            <li><a href="/picture/#(picture_0.pageNumber-1)">&laquo;</a></li>
            #end
            #if(picture_0.pageNumber==1)
            #for(i=0;i<4;i++)
            #if(for.index+1==picture_0.pageNumber)
            <li class="am-active"><a href="">#(for.index+1)</a></li>
            #else
            <li><a href="/picture/#(for.index+1)">#(for.index+1)</a></li>
            #end
            #end
            #elseif(picture_0.pageNumber+2>=pNum)
            #for(i=0;i<4;i++)
            #if(pNum-3+for.index==picture_0.pageNumber)
            <li class="am-active"><a href="">#(pNum-3+for.index)</a></li>
            #else
            <li><a href="/picture/#(pNum-3+for.index)">#(pNum-3+for.index)</a></li>
            #end
            #end
            #else
            <li><a href="/picture/#(picture_0.pageNumber-1)">#(picture_0.pageNumber-1)</a></li>
            <li class="am-active"><a href="">#(picture_0.pageNumber)</a></li>
            <li><a href="/picture/#(picture_0.pageNumber+1)">#(picture_0.pageNumber+1)</a></li>
            <li><a href="/picture/#(picture_0.pageNumber+2)">#(picture_0.pageNumber+2)</a></li>
            #end
            #if(picture_0.pageNumber==pNum)
            <li class="am-disabled"><a href="#">&raquo;</a></li>
            #else
            <li><a href="/picture/#(picture_0.pageNumber+1)">&raquo;</a></li>
            #end
        </ul>
        #end
    </div>
    #end
</div>
<div id="pic-upload" style="padding-bottom: 20px;clear: both">
    <div class="am-panel-group" id="accordion">
        <div class="am-panel am-panel-default">
            <div class="am-panel-hd">
                <h4 class="am-panel-title" data-am-collapse="{parent: '#accordion', target: '#do-not-say-1'}">
                    添加图片
                </h4>
            </div>
            <div id="do-not-say-1" class="am-panel-collapse am-collapse">
                <div class="am-panel-bd">
                    <form enctype="multipart/form-data" id="img-upload-form" class="am-form">
                        <fieldset>
                            <legend>添加一张图片</legend>
                            <img id="preview-img" style="width: 60%;height: 60%"/>
                            <div class="am-form-group am-form-file">
                                <div>
                                    <button type="button" class="am-btn am-btn-default am-btn-sm">
                                        <i class="am-icon-cloud-upload"></i> 选择要上传的图片
                                    </button>
                                </div>
                                <input name="file" type="file" id="img-input" accept="image/*" multiple required/>
                                <progress class="am-progress" value="0" hidden></progress>
                            </div>
                            <div class="am-form-group">
                                <label for="title-input">标题：</label>
                                <input type="text" name="title" id="title-input" minlength="1"
                                       placeholder="输入标题（至少 1 个字符）" required/>
                            </div>
                            <div class="am-form-group">
                                <label for="intro-input">介绍：</label>
                                <textarea class="" rows="5" id="intro-input" name="introduction"></textarea>
                            </div>
                        </fieldset>
                    </form>
                    <button type="submit" class="am-btn am-btn-default" id="img-upload-btn">提交</button>
                </div>
            </div>
        </div>
    </div>
</div>
#end

#define js()
<script src="/assets/js/picture.js"></script>
#end